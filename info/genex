## -*- shell-script -*-

genex()
{
	local BINARY="${1}"
	local BINNAME="${2}"
	local CMDLINE="${3}"
	local STDIN="${4}"

	echo -n "% ${BINNAME} ${CMDLINE}"
	if test -r "${STDIN}" -a -s "${STDIN}"; then
		echo " <<EOF"
		cat "${STDIN}"
		echo "EOF"
	else
		echo
	fi
	eval "${BINARY}" "${CMDLINE}" < "${STDIN:-/dev/null}"
}
